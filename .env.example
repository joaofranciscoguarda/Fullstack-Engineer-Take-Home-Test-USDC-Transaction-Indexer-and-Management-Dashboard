# =================================================================
# NEST.JS indexer - ENVIRONMENT CONFIGURATION
# Copy this file to .env and update the values as needed
# =================================================================

# =================================================================
# CORE APPLICATION SETTINGS
# =================================================================
NODE_ENV=development
ERROR_PROVIDER=mock
CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# =================================================================
# AUTHENTICATION & SECURITY
# =================================================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=1h
JWT_ISSUER=indexer-api
JWT_AUDIENCE=indexer-client

# =================================================================
# DATABASE CONFIGURATION
# =================================================================

# Docker Database Settings
DB_DEBUG_SQL=false
DB_ROOT_PASSWORD=root_password
DB_PORT=5432
DB_HOST=postgres
DB_DATABASE=indexer_db
DB_USERNAME=indexer_user
DB_PASSWORD=indexer_password
DATABASE_URL="${DB_HOST}://${DB_USERNAME}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_DATABASE}"

# =================================================================
# DOCKER PORTS
# =================================================================
FORWARD_APP_PORT=8080
FORWARD_DEBUG_PORT=9229
FORWARD_DB_PORT=5432
FORWARD_REDIS_PORT=6379
# FORWARD_QUEUE_PORT=9324
# FORWARD_QUEUE_UI_PORT=9325

# =================================================================
# ERROR TRACKING & MONITORING
# =================================================================
SENTRY_DSN=
BUGSNAG_API_KEY=

# =================================================================
# QUEUE SYSTEM (BullMQ with Redis)
# =================================================================
QUEUE_PROVIDER=bullmq # bullmq | mock
REDIS_HOST=redis
QUEUE_HOST=redis
QUEUE_PORT=6379
QUEUE_PASSWORD=
QUEUE_DB=0

# Job Configuration
QUEUE_REMOVE_ON_COMPLETE=10
QUEUE_REMOVE_ON_FAIL=50
QUEUE_ATTEMPTS=3
QUEUE_BACKOFF_DELAY=2000

# Blockchain Events Queue Configuration
QUEUE_BLOCKCHAIN_EVENTS_ATTEMPTS=10
QUEUE_BLOCKCHAIN_EVENTS_BACKOFF_DELAY=5000

# =================================================================
# Blockchain configuration
# =================================================================

DEFAULT_CHAIN_ID=1
BLOCK_RANGE_WORKERS=8
CATCHUP_WORKERS=

BLOCK_RANGE_SIZE=
INDEXER_POLLING_INTERVAL=
MAX_CATCHUP_CHUNK_SIZE=100
MIN_CATCHUP_CHUNK_SIZE=
REALTIME_THRESHOLD=
CATCHUP_THRESHOLD=
INDEXER_STOP_AT_BLOCK=

1_1_TRANSPORT=https://eth.llamarpc.com
1_2_TRANSPORT=https://rpc.ankr.com/eth/ # INSERT HERE YOUR API KEY 
1_3_TRANSPORT=https://ethereum-mainnet.gateway.tatum.io

1_INDEXER_START_BLOCK=23500000